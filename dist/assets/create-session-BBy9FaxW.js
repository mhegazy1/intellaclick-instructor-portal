import{t as c}from"./toast-Cbd37M37.js";/* empty css               *//* empty css                       */import{c as D,s as H}from"./api-Cc5qfUA_.js";import{l as a}from"./logger-CXzo1yMG.js";import{g as j,a as F}from"./questionPreview-ChZvlnqt.js";const L=document.createElement("style");L.textContent=j();document.head.appendChild(L);let S,E,b=null,g=[],k=null,f=4,y=4,h=4,w=4;document.addEventListener("DOMContentLoaded",function(){if(S=new URLSearchParams(window.location.search).get("classId"),!S){window.location.href="classes.html";return}G(),ie(),P(4),T(4),C(4),A(4),document.getElementById("sessionForm").addEventListener("submit",ce),te(),ne();const e=sessionStorage.getItem("fromSavedSet"),o=sessionStorage.getItem("pendingQuestions");a.debug("üîµ Page loaded - checking for pending questions"),a.debug("fromSavedSet:",e),a.debug("pendingQuestions:",o?"exists":"none"),e==="true"&&o&&(a.debug("‚úÖ Auto-selecting Quick Poll mode"),setTimeout(()=>{z("quick")},500))});function G(){localStorage.getItem("token")||(window.location.href="login.html")}function P(t){f=t;const e=document.getElementById("mcqOptionsContainer"),o={};let i=null;for(let s=0;s<26;s++){const n=String.fromCharCode(65+s),r=document.getElementById(`option${n}`),l=document.querySelector(`input[name="correctAnswer"][value="${n}"]`);r&&(o[n]=r.value),l&&l.checked&&(i=n)}e.innerHTML="";for(let s=0;s<t;s++){const n=String.fromCharCode(65+s),r=document.createElement("div");r.className="radio-option",r.innerHTML=`
                    <input type="radio" name="correctAnswer" value="${n}" ${i===n||s===0&&!i?"checked":""}>
                    <input type="text" id="option${n}" placeholder="Option ${n}" value="${o[n]||""}" style="width: calc(100% - 40px); margin-left: 8px;">
                `,e.appendChild(r)}}function T(t){y=t;const e=document.getElementById("pollOptionsContainer"),o={};for(let i=0;i<26;i++){const s=String.fromCharCode(65+i),n=document.getElementById(`pollOption${s}`);n&&(o[s]=n.value)}e.innerHTML="";for(let i=0;i<t;i++){const s=String.fromCharCode(65+i),n=document.createElement("input");n.type="text",n.id=`pollOption${s}`,n.placeholder=`Option ${s}`,n.value=o[s]||"",n.style.width="100%",e.appendChild(n)}}function J(){if(f>=26){c.error("Maximum 26 options allowed");return}f++,P(f)}function V(){if(f<=2){c.error("Minimum 2 options required");return}f--,P(f)}function W(){if(y>=26){c.error("Maximum 26 options allowed");return}y++,T(y)}function _(){if(y<=2){c.error("Minimum 2 options required");return}y--,T(y)}function C(t){h=t;const e=document.getElementById("matchingPairsContainer"),o={};for(let i=1;i<=10;i++){const s=document.getElementById(`match${i}Left`),n=document.getElementById(`match${i}Right`);s&&(o[`${i}Left`]=s.value),n&&(o[`${i}Right`]=n.value)}e.innerHTML="";for(let i=0;i<t;i++){const s=i+1,n=document.createElement("input");n.type="text",n.id=`match${s}Left`,n.placeholder=`Item ${s}`,n.value=o[`${s}Left`]||"",n.style.width="100%";const r=document.createElement("input");r.type="text",r.id=`match${s}Right`,r.placeholder=`Match ${s}`,r.value=o[`${s}Right`]||"",r.style.width="100%",e.appendChild(n),e.appendChild(r)}}function K(){if(h>=10){c.error("Maximum 10 pairs allowed");return}h++,C(h)}function X(){if(h<=2){c.error("Minimum 2 pairs required");return}h--,C(h)}function A(t){w=t;const e=document.getElementById("orderingItemsContainer"),o={};for(let i=1;i<=10;i++){const s=document.getElementById(`order${i}`);s&&(o[i]=s.value)}e.innerHTML="";for(let i=0;i<t;i++){const s=i+1,n=document.createElement("input");n.type="text",n.id=`order${s}`,n.placeholder=`${ee(s)} item`,n.value=o[s]||"",n.style.width="100%",e.appendChild(n)}}function Y(){if(w>=10){c.error("Maximum 10 items allowed");return}w++,A(w)}function Z(){if(w<=2){c.error("Minimum 2 items required");return}w--,A(w)}function ee(t){const e=["th","st","nd","rd"],o=t%100;return t+(e[(o-20)%10]||e[o]||e[0])}async function te(){try{const t=await fetch("https://api-modular.intellaclick.com/api/users/session-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(t.ok){const o=(await t.json()).settings;o.allowAnonymous!==void 0&&(document.getElementById("allowAnonymous").checked=o.allowAnonymous),o.openToAll!==void 0&&(document.getElementById("openToAll").checked=o.openToAll),o.allowAnswerChange!==void 0&&(document.getElementById("allowAnswerChange").checked=o.allowAnswerChange),o.showCorrectAnswer!==void 0&&(document.getElementById("showCorrectAnswer").checked=o.showCorrectAnswer),o.enableGamification!==void 0&&(document.getElementById("enableGamification").checked=o.enableGamification),o.autoSaveQuestions!==void 0&&(document.getElementById("autoSaveQuestions").checked=o.autoSaveQuestions),a.debug("‚úÖ Loaded saved session settings from backend:",o)}else a.debug("No saved settings found, using defaults")}catch(t){a.error("Error loading saved settings:",t)}}async function ne(){try{const t=await fetch("https://api-modular.intellaclick.com/api/users/question-defaults",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(t.ok){const o=(await t.json()).defaults;return o.defaultTimeLimit!==void 0&&(document.getElementById("defaultTimeLimit").value=o.defaultTimeLimit),o.defaultPoints!==void 0&&(document.getElementById("defaultPoints").value=o.defaultPoints),o.defaultAwardParticipation!==void 0&&(document.getElementById("defaultAwardParticipation").checked=o.defaultAwardParticipation),a.debug("‚úÖ Loaded question defaults from backend:",o),o}else return a.debug("No saved question defaults found, using system defaults"),null}catch(t){return a.error("Error loading question defaults:",t),null}}async function oe(){try{const t={defaultTimeLimit:parseInt(document.getElementById("defaultTimeLimit").value)||60,defaultPoints:parseInt(document.getElementById("defaultPoints").value)||10,defaultAwardParticipation:document.getElementById("defaultAwardParticipation").checked};return(await fetch("https://api-modular.intellaclick.com/api/users/question-defaults",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)})).ok?(a.debug("‚úÖ Question defaults saved to backend:",t),t):(a.error("Failed to save question defaults"),null)}catch(t){return a.error("Error saving question defaults:",t),null}}async function ie(){try{const t=await D.getById(S);E=t.class||t,document.getElementById("classInfo").innerHTML=`
                    <strong>${E.name}</strong> - ${E.code} ${E.section?"("+E.section+")":""}
                `;const e=new Date,o=e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),i=e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});document.getElementById("sessionName").value=`${E.name} Session - ${o} ${i}`}catch(t){a.error("Error loading class:",t),c.error("Failed to load class information")}}function z(t){if(a.debug("=== selectSessionType called ==="),a.debug("type:",t),b=t,t!=="quick")g=[];else{const n=sessionStorage.getItem("fromSavedSet"),r=sessionStorage.getItem("pendingQuestions");if(a.debug("fromSavedSet:",n),a.debug("pendingQuestions:",r?`${r.length} chars`:"null"),n==="true"&&r)try{g=JSON.parse(r),a.debug("‚úÖ Loaded questions:",g.length),sessionStorage.removeItem("fromSavedSet"),sessionStorage.removeItem("pendingQuestions"),c.success(`Loaded ${g.length} questions from saved set`)}catch(l){a.error("‚ùå Error loading saved questions:",l)}else a.debug("No pending questions found");Q()}document.querySelectorAll(".option-card").forEach(n=>{n.classList.remove("selected")}),document.getElementById(t+"Option").classList.add("selected"),document.getElementById("sessionConfig").style.display="block",document.getElementById("quickPollConfig").style.display=t==="quick"?"block":"none",document.getElementById("quizConfig").style.display=t==="quiz"?"block":"none",document.getElementById("desktopInstructions").style.display=t==="desktop"?"block":"none";const e=t!=="desktop";document.getElementById("sessionSettings").style.display=e?"block":"none",document.getElementById("sessionOptions").style.display=e?"block":"none",document.getElementById("sessionName").parentElement.style.display=e?"block":"none",document.getElementById("startButton").style.display=t==="desktop"?"none":"inline-block",t==="quiz"?se():t==="desktop"&&ae();const o=new Date,i=o.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),s=o.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});document.getElementById("sessionName").value=`${E.name} Session - ${i} ${s}`}async function se(){try{const e=await(await fetch("https://api-modular.intellaclick.com/api/quizzes",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json(),o=document.getElementById("quizSelect"),i=document.getElementById("noQuizzesMessage");e.success&&e.quizzes&&e.quizzes.length>0?(o.innerHTML='<option value="">Select a quiz...</option>'+e.quizzes.map(s=>`<option value="${s._id}">${s.title} (${s.questionCount||0} questions)</option>`).join(""),i.style.display="none"):(o.innerHTML='<option value="">No quizzes available</option>',i.style.display="block")}catch(t){a.error("Error loading quizzes:",t);const e=document.getElementById("quizSelect");e.innerHTML='<option value="">Error loading quizzes</option>',c.error("Failed to load quizzes")}}function ae(){document.getElementById("desktopClassName").textContent=E.name,document.getElementById("desktopJoinCode").textContent=E.joinCode||"N/A"}function M(){const t=document.getElementById("questionType").value;switch(document.getElementById("mcqOptions").style.display="none",document.getElementById("pollOptions").style.display="none",document.getElementById("tfOptions").style.display="none",document.getElementById("matchingOptions").style.display="none",document.getElementById("orderingOptions").style.display="none",document.getElementById("fillblankOptions").style.display="none",t){case"mcq":document.getElementById("mcqOptions").style.display="block";break;case"poll":document.getElementById("pollOptions").style.display="block";break;case"tf":document.getElementById("tfOptions").style.display="block";break;case"matching":document.getElementById("matchingOptions").style.display="block";break;case"ordering":document.getElementById("orderingOptions").style.display="block";break;case"fillblank":document.getElementById("fillblankOptions").style.display="block";break}}function re(){const t=document.getElementById("questionType").value,e=document.getElementById("questionText").value.trim();if(!e){c.error("Please enter a question");return}const o=parseInt(document.getElementById("defaultTimeLimit").value)||60,i=parseInt(document.getElementById("defaultPoints").value)||10,s=document.getElementById("defaultAwardParticipation").checked;let n={text:e,type:t,timeLimit:o,points:i,awardParticipationPoints:s};try{switch(t){case"mcq":const r=[],l=[];let d=null;for(let m=0;m<f;m++){const p=String.fromCharCode(65+m),v=document.getElementById(`option${p}`);if(v&&v.value.trim()){r.push(p),l.push(v.value.trim());const O=document.querySelector(`input[name="correctAnswer"][value="${p}"]`);O&&O.checked&&(d=p)}}if(r.length<2){c.error("Please provide at least 2 answer options");return}n.options=r,n.optionTexts=l,n.correctAnswer=d;break;case"poll":const u=[],B=[];for(let m=0;m<y;m++){const p=String.fromCharCode(65+m),v=document.getElementById(`pollOption${p}`);v&&v.value.trim()&&(u.push(p),B.push(v.value.trim()))}if(u.length<2){c.error("Please provide at least 2 poll options");return}n.options=u,n.optionTexts=B;const I=document.getElementById("pollParticipationPoints").checked;n.awardParticipationPoints=I;break;case"tf":n.options=["True","False"],n.correctAnswer=document.querySelector('input[name="tfAnswer"]:checked').value;break;case"matching":const q=[];for(let m=1;m<=h;m++){const p=document.getElementById(`match${m}Left`).value.trim(),v=document.getElementById(`match${m}Right`).value.trim();p&&v&&q.push({left:p,right:v})}if(q.length<2){c.error("Please provide at least 2 matching pairs");return}n.pairs=q,a.debug("üîç Created matching question with pairs:",{pairs:q,questionPairs:n.pairs});break;case"ordering":const $=[];for(let m=1;m<=w;m++){const p=document.getElementById(`order${m}`).value.trim();p&&$.push(p)}if($.length<2){c.error("Please provide at least 2 items to order");return}n.correctOrder=$;break;case"fillblank":const x=document.getElementById("blankAnswer").value.trim();if(!x){c.error("Please provide the correct answer");return}if(!e.includes("[blank]")){c.error("Please include [blank] in your question where the answer should go");return}n.correctAnswer=x;break}k!==null?(g[k]=n,a.debug("‚úÖ Updated question at index:",k),c.success("Question updated successfully!"),k=null,document.getElementById("addQuestionBtn").textContent="Add Question",document.getElementById("cancelEditBtn").style.display="none"):(g.push(n),a.debug("‚úÖ Added question to array:",{type:n.type,question:n,arrayLength:g.length}),c.success("Question added successfully!")),N(),Q()}catch(r){c.error("Error adding question: "+r.message)}}function N(){document.getElementById("questionText").value="";for(let e=0;e<f;e++){const o=String.fromCharCode(65+e),i=document.getElementById(`option${o}`);i&&(i.value="")}for(let e=0;e<y;e++){const o=String.fromCharCode(65+e),i=document.getElementById(`pollOption${o}`);i&&(i.value="")}for(let e=1;e<=h;e++){const o=document.getElementById(`match${e}Left`),i=document.getElementById(`match${e}Right`);o&&(o.value=""),i&&(i.value="")}for(let e=1;e<=w;e++){const o=document.getElementById(`order${e}`);o&&(o.value="")}const t=document.getElementById("blankAnswer");t&&(t.value="")}function le(t){window.confirm("Remove this question?")&&(g.splice(t,1),k===t?R():k!==null&&k>t&&k--,Q())}function de(t){const e=g[t];k=t,document.getElementById("addQuestionBtn").textContent="Update Question",document.getElementById("cancelEditBtn").style.display="inline-block",document.getElementById("questionType").value=e.type,M(),document.getElementById("questionText").value=e.text,document.getElementById("defaultTimeLimit").value=e.timeLimit||60,document.getElementById("defaultPoints").value=e.points||10,document.getElementById("defaultAwardParticipation").checked=e.awardParticipationPoints||!1,setTimeout(()=>{switch(e.type){case"mcq":f=e.options.length,P(f),setTimeout(()=>{e.optionTexts.forEach((r,l)=>{const d=String.fromCharCode(65+l),u=document.getElementById(`option${d}`);u&&(u.value=r)});const n=document.querySelector(`input[name="correctAnswer"][value="${e.correctAnswer}"]`);n&&(n.checked=!0)},50);break;case"poll":y=e.options.length,T(y),setTimeout(()=>{e.optionTexts.forEach((n,r)=>{const l=String.fromCharCode(65+r),d=document.getElementById(`pollOption${l}`);d&&(d.value=n)}),document.getElementById("pollParticipationPoints").checked=e.awardParticipationPoints||!1},50);break;case"tf":const i=document.querySelector(`input[name="tfAnswer"][value="${e.correctAnswer}"]`);i&&(i.checked=!0);break;case"matching":h=e.pairs.length,C(h),setTimeout(()=>{e.pairs.forEach((n,r)=>{const l=document.getElementById(`match${r+1}Left`),d=document.getElementById(`match${r+1}Right`);l&&(l.value=n.left),d&&(d.value=n.right)})},50);break;case"ordering":w=e.correctOrder.length,A(w),setTimeout(()=>{e.correctOrder.forEach((n,r)=>{const l=document.getElementById(`order${r+1}`);l&&(l.value=n)})},50);break;case"fillblank":const s=document.getElementById("blankAnswer");s&&(s.value=e.correctAnswer);break}const o=document.getElementById("quickPollConfig")||document.getElementById("questionText");o&&o.scrollIntoView({behavior:"smooth",block:"start"}),c.info('Editing question. Click "Update Question" when done.')},100)}function R(){k=null,document.getElementById("addQuestionBtn").textContent="+ Add This Question",document.getElementById("cancelEditBtn").style.display="none",N(),c.info("Edit cancelled")}function Q(){const t=document.getElementById("questionsList");if(g.length===0){t.innerHTML='<p style="color: var(--text-secondary); font-size: 14px;">No questions added yet.</p>';return}t.innerHTML=`
                <div style="margin-bottom: 12px;">
                    <strong>${g.length} Question(s) Added:</strong>
                </div>
                ${g.map((e,o)=>`
                    <div style="background-color: #F9FAFB; padding: 12px; border-radius: 8px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: start;">
                        <div style="flex: 1;">
                            <div style="font-weight: 500; margin-bottom: 4px;">Q${o+1}: ${e.text}</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">Type: ${e.type.toUpperCase()}${e.awardParticipationPoints?" | Participation Points: ‚úì":""}</div>
                        </div>
                        <div style="display: flex; gap: 8px;">
                            <button type="button" class="btn btn-secondary btn-small" onclick="editQuickPollQuestion(${o})">Edit</button>
                            <button type="button" class="btn btn-danger btn-small" onclick="removeQuickPollQuestion(${o})">Remove</button>
                        </div>
                    </div>
                `).join("")}
            `}async function ce(t){if(t.preventDefault(),!b){c.error("Please select a session type");return}if(b==="desktop")return;await oe();const o=document.getElementById("customSessionCode").value.trim()||Math.random().toString(36).substring(2,8).toUpperCase(),i={sessionCode:o,title:document.getElementById("sessionName").value,description:`${b==="quick"?"Quick Poll":"Quiz Session"} for ${E.name}`,requireLogin:!document.getElementById("allowAnonymous").checked,classId:S,restrictToEnrolled:!document.getElementById("openToAll").checked,gamification:{enabled:document.getElementById("enableGamification").checked},allowAnswerChange:document.getElementById("allowAnswerChange").checked,showCorrectAnswer:document.getElementById("showCorrectAnswer").checked};if(a.debug("=== CREATING SESSION WITH SETTINGS ==="),a.debug("showCorrectAnswer checkbox value:",document.getElementById("showCorrectAnswer").checked),a.debug("Session data being sent:",i),b==="quick"){if(g.length===0){c.error("Please add at least one question to the quick poll");return}i.questions=g}else if(b==="quiz"){const s=document.getElementById("quizSelect").value;if(!s){c.error("Please select a quiz");return}try{const n=await fetch(`https://api-modular.intellaclick.com/api/quizzes/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!n.ok)throw new Error("Failed to load quiz");const r=await n.json(),l=r.quiz||r,d={defaultTimeLimit:parseInt(document.getElementById("defaultTimeLimit").value)||60,defaultPoints:parseInt(document.getElementById("defaultPoints").value)||10,defaultAwardParticipation:document.getElementById("defaultAwardParticipation").checked};a.debug("üìã Applying question defaults to imported quiz:",d);const u=(l.questions||[]).map(B=>{const I=B.questionSnapshot||{},q=I.questionType||I.type||"mcq";return{text:I.questionText||"",type:q,timeLimit:d.defaultTimeLimit,points:d.defaultPoints,awardParticipationPoints:d.defaultAwardParticipation,options:I.options,correctAnswer:I.correctAnswer,pairs:I.pairs,correctOrder:I.correctOrder,optionTexts:I.options}});if(i.questions=u,i.quizId=s,i.quizTitle=l.title,i.questions.length===0){c.error("Selected quiz has no questions");return}}catch(n){a.error("Error loading quiz:",n),c.error("Failed to load quiz data");return}}try{const s=await H.create(i),n=s.session||s,r={allowAnonymous:document.getElementById("allowAnonymous").checked,openToAll:document.getElementById("openToAll").checked,allowAnswerChange:document.getElementById("allowAnswerChange").checked,showCorrectAnswer:document.getElementById("showCorrectAnswer").checked,enableGamification:document.getElementById("enableGamification").checked,autoSaveQuestions:document.getElementById("autoSaveQuestions").checked};if(fetch("https://api-modular.intellaclick.com/api/users/session-settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(r)}).then(()=>{a.debug("‚úÖ Saved session settings to backend for next time")}).catch(d=>{a.error("Failed to save settings (non-critical):",d)}),c.success(`Session created! Code: ${n.sessionCode||o}`),i.questions&&i.questions.length>0){a.debug("üì¶ Storing questions in sessionStorage:",i.questions),sessionStorage.setItem("pendingQuestions",JSON.stringify(i.questions)),sessionStorage.setItem("currentQuestionIndex","0");const d=JSON.parse(sessionStorage.getItem("pendingQuestions"));a.debug("‚úÖ Verified stored questions:",d)}const l=document.getElementById("autoSaveQuestions").checked;a.debug("Auto-save checkbox state:",l),l&&i.questions&&i.questions.length>0?(a.debug("Auto-saving questions because checkbox is checked"),pe(i.title,i.questions)):l||a.debug("‚è≠Ô∏è Skipping auto-save - user unchecked the box"),setTimeout(()=>{a.debug("=== REDIRECTING NOW ==="),window.location.href=`session.html?id=${n.id||n._id}&code=${n.sessionCode||o}&type=${b}`},5e3)}catch(s){a.error("Error creating session:",s),c.error(s.message||"Failed to create session")}}function ue(){window.confirm("Are you sure you want to cancel?")&&(window.location.href="classes.html")}function me(){const t=window.location.href;sessionStorage.setItem("createSessionUrl",t),a.debug("Navigating to saved questions, returnUrl:",t),window.location.href=`saved-questions.html?returnUrl=${encodeURIComponent(t)}`}function ge(){const t=document.getElementById("questionText"),e=t.selectionStart,o=t.selectionEnd,i=t.value,s=i.substring(0,e)+"[blank]"+i.substring(o);t.value=s,t.selectionStart=t.selectionEnd=e+7,t.focus()}async function pe(t,e){if(a.debug("=== AUTO-SAVE CALLED ==="),a.debug("Session name:",t),a.debug("Questions array:",e),a.debug("Questions length:",e==null?void 0:e.length),!e||e.length===0){a.debug("‚ùå No questions to save - skipping auto-save");return}const o=localStorage.getItem("token");if(!o){a.warn("‚ö†Ô∏è No authentication token - skipping auto-save (silent)");return}a.debug(`üîÑ Auto-saving "${t}" with ${e.length} questions to cloud...`);const i={name:t,questions:e,classId:null};a.debug("Payload being sent:",JSON.stringify(i,null,2));try{const s=await fetch("https://api-modular.intellaclick.com/api/question-sets",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(i)});if(a.debug("Response status:",s.status),!s.ok){const r=await s.json();a.error("‚ùå Cloud API save failed:",r),a.error("Response status:",s.status),a.warn("‚ö†Ô∏è Question set auto-save failed, but session will continue");return}const n=await s.json();a.debug("‚úÖ Question set auto-saved to cloud successfully:",n)}catch(s){a.error("‚ùå Error auto-saving question set:",s),a.error("Error stack:",s.stack),a.warn("‚ö†Ô∏è Question set auto-save failed, but session will continue")}}function fe(){const t=document.getElementById("questionText").value.trim();if(!t){c.error("Please enter question text first");return}const e=document.getElementById("questionType").value,o=parseInt(document.getElementById("defaultTimeLimit").value)||60,i=parseInt(document.getElementById("defaultPoints").value)||10;let s={text:t,type:e,timeLimit:o,points:i};if(e==="mcq"||e==="poll"){const r=[];for(let l=0;l<(e==="mcq"?f:y);l++){const d=String.fromCharCode(65+l),u=document.getElementById(e==="mcq"?`option${d}`:`pollOption${d}`);u&&u.value.trim()&&r.push(u.value.trim())}s.options=r}else if(e==="matching"){const r=[],l=[];for(let d=1;d<=h;d++){const u=document.getElementById(`match${d}Left`),B=document.getElementById(`match${d}Right`);u&&u.value.trim()&&r.push(u.value.trim()),B&&B.value.trim()&&l.push(B.value.trim())}s.matching={items:r,matches:l}}else if(e==="ordering"){const r=[];for(let l=1;l<=w;l++){const d=document.getElementById(`order${l}`);d&&d.value.trim()&&r.push(d.value.trim())}s.ordering=r}const n=F(s);document.getElementById("questionPreviewBody").innerHTML=n,document.getElementById("questionPreviewModal").classList.add("active")}function U(){document.getElementById("questionPreviewModal").classList.remove("active")}document.addEventListener("keydown",t=>{if(t.key==="Escape"){const e=document.getElementById("questionPreviewModal");e&&e.classList.contains("active")&&U()}});window.selectSessionType=z;window.goToSavedQuestions=me;window.insertBlank=ge;window.updateQuestionOptions=M;window.addQuickPollQuestion=re;window.cancelSession=ue;window.removeQuickPollQuestion=le;window.editQuickPollQuestion=de;window.cancelEdit=R;window.addMcqOption=J;window.removeMcqOption=V;window.addPollOption=W;window.removePollOption=_;window.addMatchingPair=K;window.removeMatchingPair=X;window.addOrderingItem=Y;window.removeOrderingItem=Z;window.previewQuestion=fe;window.closePreviewModal=U;
