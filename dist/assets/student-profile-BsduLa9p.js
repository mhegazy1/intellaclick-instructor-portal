import"./toast-OawwZGYy.js";/* empty css               */import{l as r}from"./logger-P_9I2l6U.js";import{l as u}from"./loading-CWfhFw7n.js";let l=null,a=null;const g=new URLSearchParams(window.location.search);l=g.get("id");a=g.get("classId");function f(){return localStorage.getItem("token")?!0:(window.location.href="login.html",!1)}document.getElementById("backBtn").addEventListener("click",t=>{t.preventDefault(),a?window.location.href=`roster.html?id=${a}`:window.location.href="classes.html"});async function E(){var t;if(!l||!a){m("Missing student ID or class ID");return}u.show("Loading student profile...");try{const e=await fetch(`https://api-modular.intellaclick.com/api/enrollment/class/${a}/students`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error("Failed to load student data");const n=await e.json();r.info("Enrollment data received:",n);const o=(t=n.enrollments)==null?void 0:t.find(s=>{var d;return((d=s.student)==null?void 0:d._id)===l});if(!o)throw new Error("Student not found in this class");I(o)}catch(e){r.error("Failed to load student data",e),m(e.message||"Failed to load student profile")}finally{u.hide()}}function I(t){const e=t.student,n=t.stats||{};r.info("Displaying student data:",{student:e,enrollment:t,stats:n});const o=e.firstName||"",s=e.lastName||"",d=`${o} ${s}`.trim()||"Unknown Student";document.getElementById("studentName").textContent=d,document.getElementById("studentEmail").textContent=e.email||"-";const y=(o.charAt(0)+s.charAt(0)).toUpperCase();document.getElementById("initials").textContent=y||"?";const c=`<span class="status-badge status-${t.status}">${t.status}</span>`;document.getElementById("enrollmentStatus").innerHTML=c,document.getElementById("infoEmail").textContent=e.email||"-",document.getElementById("infoStudentId").textContent="Not available",document.getElementById("infoInstitution").textContent="Not available",document.getElementById("infoEmailVerified").textContent="Not available",document.getElementById("enrollStatus").innerHTML=c,document.getElementById("enrollDate").textContent=t.enrolledAt?new Date(t.enrolledAt).toLocaleDateString():"-",document.getElementById("lastActivity").textContent=t.lastActivity?new Date(t.lastActivity).toLocaleDateString():"No activity";const i=n.questionsAnswered>0?Math.round(n.correctAnswers/n.questionsAnswered*100):0;document.getElementById("currentGrade").textContent=i>0?`${i}%`:"No grade yet",document.getElementById("statSessions").textContent=n.sessionsAttended||0,document.getElementById("statQuestions").textContent=n.questionsAnswered||0,document.getElementById("statCorrect").textContent=n.correctAnswers||0,document.getElementById("statAccuracy").textContent=i+"%",document.getElementById("statPoints").textContent=n.totalPoints||0,document.getElementById("statStreak").textContent=n.currentStreak||0,document.getElementById("profileHeader").style.display="flex",document.getElementById("contentContainer").style.display="block"}function m(t){const e=document.getElementById("errorContainer");e.innerHTML=`
                <div class="error-message">
                    <strong>Error:</strong> ${t}
                </div>
            `}f()&&E();
