import{t as a}from"./toast-93yYkT8V.js";/* empty css               */import{l as c}from"./logger-gSLuc3Ra.js";let g,w,d,L,p=[],f=-1,k,v=null,y={defaultTimeLimit:60,defaultPoints:10,defaultAwardParticipation:!1,defaultShowCorrectAnswer:!0,defaultAllowAnswerChange:!0};document.addEventListener("DOMContentLoaded",function(){const e=new URLSearchParams(window.location.search);if(g=e.get("id"),w=e.get("code"),e.get("type"),!g||!w){a.error("Invalid session parameters"),setTimeout(()=>window.location.href="classes.html",2e3);return}const t=sessionStorage.getItem("pendingQuestions");if(t){const o=JSON.parse(t);p.push(...o),sessionStorage.removeItem("pendingQuestions"),sessionStorage.removeItem("currentQuestionIndex"),E()}else{const o=sessionStorage.getItem("pendingQuestion");if(o){const i=JSON.parse(o);p.push(i),sessionStorage.removeItem("pendingQuestion"),E()}}if(p.length===0){const o=sessionStorage.getItem("questionQueue_"+w),i=sessionStorage.getItem("questionIndex_"+w);o&&(console.log("[Session] Restoring queue from sessionStorage"),p=JSON.parse(o),f=i?parseInt(i):-1,E())}p.length===0&&(console.log("[Session] Attempting to restore queue from backend"),$()),A(),q(),P(),K()});function A(){localStorage.getItem("token")||(window.location.href="/login.html")}async function q(){try{const e=await fetch(`https://api-modular.intellaclick.com/api/sessions/code/${w}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error("Failed to load session");d=(await e.json()).session,L=d.classId,c.debug("Session loaded:",{sessionId:g,sessionCode:w,sessionData:d,hasCurrentQuestion:!!d.currentQuestion}),F()}catch(e){c.error("Error loading session:",e),a.error("Failed to load session")}}async function $(){try{const e=await fetch(`https://api-modular.intellaclick.com/api/sessions/${g}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok){console.error("[Session] Failed to fetch session data for queue restoration");return}const t=await e.json();t.success&&t.session.questionQueue&&t.session.questionQueue.length>0?(p=t.session.questionQueue,f=t.session.currentQuestionIndex??-1,console.log("[Session] Queue restored from backend:",{queueLength:p.length,currentIndex:f}),E(),a.success(`Restored ${p.length} questions from previous session`)):console.log("[Session] No saved queue found in backend")}catch(e){console.error("[Session] Error restoring queue from backend:",e)}}async function z(){try{if(!(await fetch(`https://api-modular.intellaclick.com/api/sessions/${g}/question-queue`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({questionQueue:p,currentQuestionIndex:f})})).ok){console.error("[Session] Failed to save queue to backend");return}console.log("[Session] Queue saved to backend successfully")}catch(e){console.error("[Session] Error saving queue to backend:",e)}}async function P(){try{const e=await fetch("https://api-modular.intellaclick.com/api/users/question-defaults",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.ok?(y=(await e.json()).defaults||y,document.getElementById("modalTimeLimit").value=y.defaultTimeLimit,document.getElementById("modalPoints").value=y.defaultPoints,document.getElementById("modalAwardParticipation").checked=y.defaultAwardParticipation,c.debug("âœ… Loaded question defaults:",y)):c.debug("No saved question defaults found, using system defaults")}catch(e){c.error("Error loading question defaults:",e)}}function F(){document.getElementById("sessionCode").textContent=d.sessionCode,document.getElementById("participantCount").textContent=d.participantCount||0;const e=`https://join.intellaclick.com/session/${d.sessionCode}`;document.getElementById("joinUrl").innerHTML=`
                <strong>Students can join at:</strong><br>
                <div style="display: flex; align-items: center; gap: 12px; margin: 8px 0;">
                    <span style="font-size: 16px; user-select: all; flex: 1;">${e}</span>
                    <button class="btn btn-secondary" onclick="copyJoinUrl('${e}')" style="padding: 6px 12px; font-size: 12px;">
                        Copy Link
                    </button>
                </div>
                <small style="color: var(--text-secondary); margin-top: 4px; display: block;">
                    Session ID: ${d.id||d._id}<br>
                    ${d.restrictToEnrolled===!1?"Open to all students":"Restricted to enrolled students only"}
                </small>
            `,R(e);const t=document.getElementById("sessionStatus");t.textContent=d.status.charAt(0).toUpperCase()+d.status.slice(1),t.className=`status-badge status-${d.status}`,d.status==="active"&&d.currentQuestion&&(document.getElementById("stopBtn").disabled=!1,document.getElementById("resultsBtn").disabled=!1,B(d.currentQuestion)),N()}function N(){const e=document.getElementById("participantsList");fetch(`https://api-modular.intellaclick.com/api/sessions/${g}/participants`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>t.json()).then(t=>{t.participants&&t.participants.length>0?(e.innerHTML="",t.participants.forEach(o=>{const i=document.createElement("div");i.className="participant-card",i.innerHTML=`
                            <strong>${o.name||"Anonymous"}</strong><br>
                            <small style="color: var(--text-secondary);">
                                Joined: ${new Date(o.joinedAt).toLocaleTimeString()}<br>
                                ${o.isEnrolled?"Enrolled Student":"Guest"}
                            </small>
                        `,e.appendChild(i)})):e.innerHTML='<p style="color: var(--text-secondary);">No participants yet. Share the session code for students to join.</p>'}).catch(t=>{c.error("Error loading participants:",t)})}function R(e){const t=document.getElementById("qrcode");t.innerHTML="";const o=document.createElement("canvas");QRCode.toCanvas(o,e,{width:400,margin:2,color:{dark:"#000000",light:"#FFFFFF"}},function(i){if(i){c.error("QR Code generation error:",i),t.innerHTML='<p style="color: var(--text-secondary);">QR Code generation failed</p>';return}o.style.width="200px",o.style.height="200px",t.appendChild(o)})}function E(){const e=document.getElementById("queueList");sessionStorage.setItem("questionQueue_"+w,JSON.stringify(p)),sessionStorage.setItem("questionIndex_"+w,f.toString()),z(),p.length===0?(e.innerHTML='<p style="color: var(--text-secondary); font-size: 14px;">No questions in queue. Create a new question or import from a quiz.</p>',document.getElementById("sendBtn").disabled=!0):(e.innerHTML="",p.forEach((t,o)=>{const i=document.createElement("div");i.className="question-item";const n=document.createElement("div");n.className="question-item-text",n.innerHTML=`<strong>${o+1}.</strong> ${t.text||t.questionText}`;const s=document.createElement("div");if(s.className="question-item-actions",o>f){const r=document.createElement("button");r.className="btn btn-secondary",r.style.padding="4px 8px",r.style.fontSize="12px",r.style.marginRight="4px",r.textContent="Edit",r.onclick=()=>H(o),s.appendChild(r);const l=document.createElement("button");l.className="btn btn-secondary",l.style.padding="4px 8px",l.style.fontSize="12px",l.textContent="Remove",l.onclick=()=>D(o),s.appendChild(l)}i.appendChild(n),i.appendChild(s),e.appendChild(i)}),document.getElementById("sendBtn").disabled=!1)}function D(e){p.splice(e,1),E()}let b=null;function H(e){b=e;const t=p[e];document.getElementById("questionModal").style.display="block";const o=t.type||t.questionType||"mcq";c.debug("Editing question with type:",o),document.getElementById("modalQuestionType").value=o,document.getElementById("modalQuestionText").value=t.text||t.questionText||"",setTimeout(()=>S(),10),setTimeout(()=>{switch(t.type){case"mcq":t.optionTexts&&["A","B","C","D"].forEach((l,u)=>{const m=document.getElementById(`modalOption${l}`);if(m&&t.optionTexts[u]&&(m.value=t.optionTexts[u]),t.correctAnswer===l||t.correctAnswer===u){const x=document.querySelector(`input[name="modalCorrect"][value="${l}"]`);x&&(x.checked=!0)}});break;case"tf":const n=t.correctAnswer==="true"||t.correctAnswer===!0?"true":"false",s=document.querySelector(`input[name="modalTF"][value="${n}"]`);s&&(s.checked=!0);break;case"matching":t.pairs&&t.pairs.forEach((l,u)=>{const m=document.getElementById(`modalMatch${u+1}Left`),x=document.getElementById(`modalMatch${u+1}Right`);m&&(m.value=l.left||""),x&&(x.value=l.right||"")});break;case"ordering":t.correctOrder&&t.correctOrder.forEach((l,u)=>{const m=document.getElementById(`modalOrder${u+1}`);m&&(m.value=l||"")});break;case"fillblank":const r=document.getElementById("modalBlankAnswer");r&&(r.value=t.correctAnswer||"");break}},100);const i=document.querySelector("#questionModal h2");i&&(i.textContent="Edit Question")}async function j(){if(f+1>=p.length){a.error("No more questions in queue");return}f++,sessionStorage.setItem("questionIndex_"+w,f.toString());const e=p[f],t={...e};delete t.type;const i={mcq:"multiple_choice",tf:"boolean",matching:"matching",ordering:"ordering",fillblank:"fill_blank"}[e.type]||e.type;if(t.questionType=i,t.type=i,t.questionText=e.text||e.questionText,e.type==="tf")t.options=["True","False"];else if(e.type==="mcq")e.optionTexts&&(t.options=e.options,t.optionTexts=e.optionTexts);else if(e.type==="matching"){t.pairs=e.pairs||[];const n=t.pairs.map(r=>r.right),s=n.sort(()=>Math.random()-.5);t.shuffledMatchingRight=s,console.log("ðŸŽ² MATCHING SHUFFLE DEBUG:",{originalPairs:t.pairs,originalRight:n,shuffledRight:s})}else if(e.type==="ordering"){t.correctOrder=e.correctOrder||[];const n=[...t.correctOrder].sort(()=>Math.random()-.5);t.shuffledOrderingItems=n,console.log("ðŸŽ² ORDERING SHUFFLE DEBUG:",{originalOrder:t.correctOrder,shuffledItems:n})}else e.type==="fillblank"&&(t.correctAnswer=e.correctAnswer||"");console.log("ðŸ“¤ SENDING QUESTION TO BACKEND:",{sessionId:g,questionType:t.questionType,type:t.type,shuffledMatchingRight:t.shuffledMatchingRight,shuffledOrderingItems:t.shuffledOrderingItems,fullQuestion:t}),c.debug("Sending question:",{sessionId:g,endpoint:`https://api-modular.intellaclick.com/api/sessions/${g}/questions`,questionData:t,hasQuestionText:!!t.questionText,questionType:t.questionType});try{const n=await fetch(`https://api-modular.intellaclick.com/api/sessions/${g}/questions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw c.error("API Error:",{status:n.status,error:r}),new Error(r.error||"Failed to send question")}const s=await n.json();c.debug("Question sent successfully:",s),a.success("Question sent successfully!"),document.getElementById("stopBtn").disabled=!1,document.getElementById("resultsBtn").disabled=!1,B(e),E(),setTimeout(async()=>{await q()},500)}catch(n){c.error("Error sending question:",n),n.name==="TypeError"&&n.message==="Failed to fetch"?(a.error("Network error: Unable to reach the API server. This may be a CORS issue."),c.error("CORS Error Details:",{error:n,message:"The API server may need to add instructor.intellaclick.com to its allowed origins",currentOrigin:window.location.origin,apiUrl:"https://api-modular.intellaclick.com"}),window.confirm(`Network error detected. This is likely a CORS configuration issue.

The backend needs to add instructor.intellaclick.com to its allowed origins.

Click OK to open the CORS test page for more details.`)&&window.open("/cors-test.html","_blank")):a.error(n.message||"Failed to send question"),f--}}function B(e){document.getElementById("currentQuestionSection").style.display="block";const t=e.type||e.questionType,o=e.text||e.questionText||"";c.debug("ðŸ“º DISPLAYING QUESTION IN SESSION CONTROL:",{questionType:t,questionText:o,hasPairs:!!e.pairs,pairs:e.pairs,hasCorrectOrder:!!e.correctOrder,correctOrder:e.correctOrder,fullQuestion:e});let i=o;(t==="fillblank"||t==="fill_blank")&&(i=i.replace(/\[blank\]/gi,'<span style="display: inline-block; min-width: 100px; border-bottom: 2px solid #4F46E5; margin: 0 6px; height: 1.2em; vertical-align: bottom;"></span>')),document.getElementById("questionText").innerHTML=i;const n=document.getElementById("questionOptions");if(n.innerHTML="",(t==="mcq"||t==="multiple_choice")&&(e.optionTexts||e.options)){const s=e.optionTexts||e.options;(e.options&&e.optionTexts?e.options:["A","B","C","D"]).forEach((l,u)=>{if(s[u]){const m=document.createElement("div");m.style.marginTop="8px",m.textContent=`${l}: ${s[u]}`,n.appendChild(m)}})}else if(t==="tf"||t==="boolean")n.innerHTML='<div style="margin-top: 8px;">A: True</div><div style="margin-top: 8px;">B: False</div>';else if(t==="matching"&&e.pairs){if(n.innerHTML="<strong>Match the following:</strong>",e.pairs.forEach((s,r)=>{const l=document.createElement("div");l.style.marginTop="8px",l.textContent=`${r+1}. ${s.left} â†’ ?`,n.appendChild(l)}),e.shuffledMatchingRight){const s=document.createElement("div");s.style.marginTop="12px",s.innerHTML="<strong>Options to match:</strong>",e.shuffledMatchingRight.forEach((r,l)=>{const u=document.createElement("div");u.style.marginTop="4px",u.textContent=`${String.fromCharCode(65+l)}. ${r}`,s.appendChild(u)}),n.appendChild(s)}}else(t==="ordering"||t==="ordering")&&e.correctOrder&&(n.innerHTML="<strong>Put in correct order:</strong>",(e.shuffledOrderingItems||e.correctOrder).forEach((r,l)=>{const u=document.createElement("div");u.style.marginTop="8px",u.textContent=`${String.fromCharCode(65+l)}. ${r}`,n.appendChild(u)}))}function U(){document.getElementById("questionModal").style.display="block",S()}function Q(){document.getElementById("questionModal").style.display="none",document.getElementById("modalQuestionText").value="",document.getElementById("modalQuestionType").value="mcq",b=null;const e=document.querySelector("#questionModal h2");e&&(e.textContent="Create Question")}function _(){document.getElementById("importModal").style.display="block",ee()}function O(){document.getElementById("importModal").style.display="none",v=null}function S(){const e=document.getElementById("modalQuestionType").value,t=document.getElementById("modalQuestionOptions");switch(e){case"mcq":t.innerHTML=`
                        <label>Answer Options (select correct answer)</label>
                        <div style="margin-top: 8px;">
                            <input type="radio" name="modalCorrect" value="A" checked> 
                            <input type="text" id="modalOptionA" placeholder="Option A" style="width: calc(100% - 30px); margin-left: 8px;">
                        </div>
                        <div style="margin-top: 8px;">
                            <input type="radio" name="modalCorrect" value="B"> 
                            <input type="text" id="modalOptionB" placeholder="Option B" style="width: calc(100% - 30px); margin-left: 8px;">
                        </div>
                        <div style="margin-top: 8px;">
                            <input type="radio" name="modalCorrect" value="C"> 
                            <input type="text" id="modalOptionC" placeholder="Option C" style="width: calc(100% - 30px); margin-left: 8px;">
                        </div>
                        <div style="margin-top: 8px;">
                            <input type="radio" name="modalCorrect" value="D"> 
                            <input type="text" id="modalOptionD" placeholder="Option D" style="width: calc(100% - 30px); margin-left: 8px;">
                        </div>
                    `;break;case"tf":t.innerHTML=`
                        <label>Correct Answer</label>
                        <div style="margin-top: 8px;">
                            <input type="radio" name="modalTF" value="true" checked> True
                            <input type="radio" name="modalTF" value="false" style="margin-left: 20px;"> False
                        </div>
                    `;break;case"matching":t.innerHTML=`
                        <label>Matching Pairs</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px;">
                            <input type="text" placeholder="Item 1" id="modalMatch1Left">
                            <input type="text" placeholder="Match 1" id="modalMatch1Right">
                            <input type="text" placeholder="Item 2" id="modalMatch2Left">
                            <input type="text" placeholder="Match 2" id="modalMatch2Right">
                            <input type="text" placeholder="Item 3" id="modalMatch3Left">
                            <input type="text" placeholder="Match 3" id="modalMatch3Right">
                        </div>
                    `;break;case"ordering":t.innerHTML=`
                        <label>Items in Correct Order</label>
                        <div style="margin-top: 8px;">
                            <input type="text" placeholder="1st item" id="modalOrder1" style="margin-bottom: 8px;">
                            <input type="text" placeholder="2nd item" id="modalOrder2" style="margin-bottom: 8px;">
                            <input type="text" placeholder="3rd item" id="modalOrder3" style="margin-bottom: 8px;">
                            <input type="text" placeholder="4th item" id="modalOrder4">
                        </div>
                    `;break;case"fillblank":t.innerHTML=`
                        <label>Correct Answer</label>
                        <input type="text" id="modalBlankAnswer" placeholder="Enter the correct answer" style="margin-top: 8px;">
                        <small style="display: block; margin-top: 8px; color: var(--text-secondary);">Use [blank] in your question where the answer should go</small>
                    `;break}}async function J(){var e;try{const t=((e=d.currentQuestion)==null?void 0:e.questionId)||"current";if(!(await fetch(`https://api-modular.intellaclick.com/api/sessions/${g}/questions/${t}/end`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Failed to stop question");a.success("Question stopped"),document.getElementById("currentQuestionSection").style.display="none",await q()}catch(t){c.error("Error stopping question:",t),a.error("Failed to stop question")}}async function G(){document.getElementById("responsesSection").style.display="block",a.info("Results feature coming soon")}async function V(){var e;if(confirm("Are you sure you want to end this session?"))try{const t=((e=d==null?void 0:d.gamification)==null?void 0:e.enabled)&&(d==null?void 0:d.classId);let o;if(t?(c.debug("Ending session with gamification processing..."),o=await fetch(`https://api-modular.intellaclick.com/api/sessions-gamified/${g}/end-with-gamification`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})):(c.debug("Ending session (no gamification)..."),o=await fetch(`https://api-modular.intellaclick.com/api/sessions/${g}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({status:"ended"})})),!o.ok)throw new Error("Failed to end session");const i=await o.json();c.debug("Session ended:",i),t&&i.gamificationResults?a.success(`Session ended - ${i.gamificationResults.length} students earned points!`):a.success("Session ended"),M(),setTimeout(()=>window.location.href="classes.html",2e3)}catch(t){c.error("Error ending session:",t),a.error("Failed to end session")}}function K(){k=setInterval(q,3e3)}function M(){k&&clearInterval(k)}function Y(){const e=`display.html?id=${g}&code=${w}`;window.open(e,"IntellaClickDisplay","width=1920,height=1080,menubar=no,toolbar=no,location=no,status=no")}function W(e){navigator.clipboard.writeText(e).then(()=>{a.success("Link copied to clipboard!")}).catch(t=>{const o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.left="-999999px",document.body.appendChild(o),o.select();try{document.execCommand("copy"),a.success("Link copied to clipboard!")}catch{a.error("Failed to copy link")}document.body.removeChild(o)})}function X(){const e=document.getElementById("sessionCode").textContent;navigator.clipboard.writeText(e).then(()=>{a.success("Session code copied!")}).catch(t=>{const o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.left="-999999px",document.body.appendChild(o),o.select();try{document.execCommand("copy"),a.success("Session code copied!")}catch{a.error("Failed to copy code")}document.body.removeChild(o)})}function Z(){const e=document.getElementById("modalQuestionText").value.trim(),t=document.getElementById("modalQuestionType").value;if(!e){a.error("Please enter a question");return}const o=parseInt(document.getElementById("modalTimeLimit").value)||60,i=parseInt(document.getElementById("modalPoints").value)||10,n=document.getElementById("modalAwardParticipation").checked;let s={text:e,type:t,timeLimit:o,points:i,awardParticipationPoints:n};switch(t){case"mcq":const r=[],l=[];let u=null;if(["A","B","C","D"].forEach(h=>{const I=document.getElementById(`modalOption${h}`);if(I&&I.value.trim()){r.push(h),l.push(I.value.trim());const T=document.querySelector(`input[name="modalCorrect"][value="${h}"]`);T&&T.checked&&(u=h)}}),r.length<2){a.error("Please provide at least 2 options");return}s.options=r,s.optionTexts=l,s.correctAnswer=u;break;case"tf":s.options=["True","False"],s.correctAnswer=document.querySelector('input[name="modalTF"]:checked').value;break;case"matching":const m=[];for(let h=1;h<=3;h++){const I=document.getElementById(`modalMatch${h}Left`).value.trim(),T=document.getElementById(`modalMatch${h}Right`).value.trim();I&&T&&m.push({left:I,right:T})}if(m.length<2){a.error("Please provide at least 2 matching pairs");return}s.pairs=m;break;case"ordering":const x=[];for(let h=1;h<=4;h++){const I=document.getElementById(`modalOrder${h}`).value.trim();I&&x.push(I)}if(x.length<2){a.error("Please provide at least 2 items");return}s.correctOrder=x;break;case"fillblank":const C=document.getElementById("modalBlankAnswer").value.trim();if(!C){a.error("Please provide the correct answer");return}if(!e.includes("[blank]")){a.error("Please include [blank] in your question");return}s.correctAnswer=C;break}b!==null?(p[b]=s,b=null,a.success("Question updated")):(p.push(s),a.success("Question added to queue")),E(),Q()}async function ee(){try{const e=await fetch("https://api-modular.intellaclick.com/api/quizzes",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error("Failed to load quizzes");const o=(await e.json()).quizzes||[],i=document.getElementById("quizList");o.length===0?(i.innerHTML='<p style="color: var(--text-secondary); text-align: center; padding: 20px;">No quizzes found. <a href="saved-questions.html" style="color: var(--primary-color);">Create your first quiz</a></p>',document.getElementById("importBtn").disabled=!0):(i.innerHTML="",o.forEach(n=>{const s=document.createElement("div");s.className="quiz-item",s.innerHTML=`
                            <strong>${n.title}</strong><br>
                            <small style="color: var(--text-secondary);">${n.questionCount||0} questions â€¢ ${n.totalPoints||0} points</small>
                        `,s.onclick=()=>te(n._id,s),i.appendChild(s)}))}catch(e){c.error("Error loading quizzes:",e);const t=document.getElementById("quizList");t.innerHTML='<p style="color: var(--danger-color); text-align: center; padding: 20px;">Failed to load quizzes. Please try again.</p>'}}function te(e,t){v=e,document.querySelectorAll(".quiz-item").forEach(o=>{o.classList.remove("selected")}),t.classList.add("selected"),document.getElementById("importBtn").disabled=!1}async function oe(){if(!v){a.error("Please select a quiz");return}try{const e=await fetch(`https://api-modular.intellaclick.com/api/quizzes/${v}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error("Failed to load quiz");const t=await e.json(),o=t.quiz||t;o.questions&&o.questions.length>0?(c.debug("ðŸ“‹ Applying question defaults to imported quiz:",y),o.questions.forEach(i=>{const n=i.questionSnapshot||i,s=n.questionType||n.type||"mcq",r={text:n.questionText||i.text||"",type:s,options:n.options||[],correctAnswer:n.correctAnswer||0,timeLimit:n.timeLimit||i.timeLimit||y.defaultTimeLimit,points:n.points||i.points||y.defaultPoints,awardParticipationPoints:y.defaultAwardParticipation};r.type==="matching"&&n.pairs&&(r.pairs=n.pairs,c.debug("ðŸ“¦ Imported matching question with pairs:",n.pairs)),r.type==="ordering"&&n.correctOrder&&(r.correctOrder=n.correctOrder,c.debug("ðŸ“¦ Imported ordering question with correctOrder:",n.correctOrder)),p.push(r)}),E(),O(),a.success(`Imported ${o.questions.length} questions from ${o.title}`)):a.error("Quiz has no questions")}catch(e){c.error("Error importing quiz:",e),a.error("Failed to import quiz")}}window.onclick=function(e){e.target.className==="modal"&&(e.target.style.display="none")};window.addEventListener("beforeunload",M);window.copySessionCode=X;window.openDisplayView=Y;window.showQuestionModal=U;window.showImportModal=_;window.sendNextQuestion=j;window.stopQuestion=J;window.showResults=G;window.loadSession=q;window.endSession=V;window.closeQuestionModal=Q;window.addQuestionToQueue=Z;window.closeImportModal=O;window.importSelectedQuiz=oe;window.copyJoinUrl=W;window.updateModalOptions=S;
