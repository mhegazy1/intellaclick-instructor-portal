import{t as s}from"./toast-DdlZoz3i.js";/* empty css               */import{q as u}from"./api-BBvzFwfC.js";import{l as d}from"./logger-D123dQQV.js";let n=[],r=null;const c=new URLSearchParams(window.location.search);r=c.get("id");r&&l(r);async function l(t){try{const e=(await u.getById(t)).quiz;document.getElementById("quiz-title").value=e.title,document.getElementById("quiz-description").value=e.description||"",n=e.questions||[],a(),document.querySelector("h1").textContent="Edit Quiz"}catch(o){d.error("Error loading quiz:",o),s.error("Failed to load quiz: "+o.message)}}function m(){window.location.href=`saved-questions.html?returnUrl=${encodeURIComponent(window.location.href)}&mode=select`}function q(){s.info("Question creator coming soon! For now, use Question Sets.")}function a(){const t=document.getElementById("question-list"),o=document.getElementById("question-count");if(n.length===0){t.innerHTML='<div class="empty-state"><p>No questions added yet. Click the buttons above to add questions.</p></div>',o.textContent="0 questions";return}t.innerHTML=n.map((e,i)=>`
        <div class="question-item">
          <div class="question-text">${i+1}. ${e.text||e.questionText||"Question"}</div>
          <div class="question-meta">
            Type: ${e.type||"MCQ"} |
            ${e.options?`${e.options.length} options`:""} |
            ${e.correctAnswer?"Answer: "+e.correctAnswer:""}
            <button class="btn btn-danger btn-small" style="float: right; padding: 0.25rem 0.75rem; font-size: 0.875rem;"
                    onclick="window.removeQuestion(${i})">Remove</button>
          </div>
        </div>
      `).join(""),o.textContent=`${n.length} question${n.length!==1?"s":""}`}window.removeQuestion=function(t){n.splice(t,1),a()};window.saveQuiz=async function(){const t=document.getElementById("quiz-title").value.trim(),o=document.getElementById("quiz-description").value.trim();if(!t){s.error("Please enter a quiz title");return}if(n.length===0){s.error("Please add at least one question to the quiz");return}const e={title:t,description:o,type:"standard",questions:n,settings:{}};try{let i;r?(i=await u.update(r,e),s.success("Quiz updated successfully!")):(i=await u.create(e),s.success("Quiz created successfully!")),setTimeout(()=>{window.location.href="quizzes.html"},1e3)}catch(i){d.error("Failed to save quiz:",i),s.error("Failed to save quiz: "+i.message)}};window.addEventListener("storage",t=>{if(t.key==="selected_questions"){const o=JSON.parse(t.newValue||"[]");o.length>0&&(n.push(...o),a(),s.success(`Added ${o.length} question(s) to quiz`),localStorage.removeItem("selected_questions"))}});window.addFromQuestionSets=m;window.createNewQuestion=q;
